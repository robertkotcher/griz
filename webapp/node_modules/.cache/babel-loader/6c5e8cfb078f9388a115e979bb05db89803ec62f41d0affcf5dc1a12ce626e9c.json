{"ast":null,"code":"import _regeneratorRuntime from\"/Users/robertkotcher/griz-backend/webapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/robertkotcher/griz-backend/webapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/robertkotcher/griz-backend/webapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import axios from'axios';import{useState}from\"react\";import styles from\"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";import{MainContainer,ChatContainer,MessageList,Message,MessageInput,TypingIndicator}from\"@chatscope/chat-ui-kit-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QUERY_URL=\"/api/query\";var Base64Image=function Base64Image(_ref){var base64Data=_ref.base64Data;var imageUrl=\"data:image/png;base64,\".concat(base64Data);return/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Chat plot\"});};function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var handleSend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,text){var encodedText,url,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);messages.push({text:text,isImage:false,time:new Date(),sender:\"Robert\",direction:\"outgoing\"});_context.prev=2;encodedText=encodeURIComponent(text);url=\"\".concat(QUERY_URL,\"?q=\").concat(encodedText);// Send the request using Axios or any other HTTP client library\n_context.next=7;return axios.get(url);case 7:response=_context.sent;messages.push({text:response.data.data,isImage:response.data.is_image,time:new Date(),sender:\"Griz\",direction:\"incoming\"});setMessages(messages);setLoading(false);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error('Error sending the request:',_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[2,13]]);}));return function handleSend(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ask a question about one of these tables:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"bitcoin_blockchain blocks\"}),/*#__PURE__*/_jsx(\"li\",{children:\"bitcoin_blockchain transactions\"}),/*#__PURE__*/_jsx(\"li\",{children:\"austin_waste waste_and_diversion\"}),/*#__PURE__*/_jsx(\"li\",{children:\"austin_bikeshare bikeshare_stations\"}),/*#__PURE__*/_jsx(\"li\",{children:\"austin_bikeshare bikeshare_trips\"}),/*#__PURE__*/_jsx(\"li\",{children:\"census_bureau_construction new_residential_construction\"}),/*#__PURE__*/_jsx(\"li\",{children:\"census_opportunity_atlas tract_covariates\"}),/*#__PURE__*/_jsx(\"li\",{children:\"chicago_crime crime\"}),/*#__PURE__*/_jsx(\"li\",{children:\"covid19_aha hospital_beds\"}),/*#__PURE__*/_jsx(\"li\",{children:\"covid19_aha staffing2\"})]}),/*#__PURE__*/_jsx(MainContainer,{className:\"main-container\",children:/*#__PURE__*/_jsxs(ChatContainer,{children:[/*#__PURE__*/_jsx(MessageList,{typingIndicator:loading?/*#__PURE__*/_jsx(TypingIndicator,{content:\"Griz is typing\"}):null,children:messages.map(function(m,idx){console.log(m);if(m.isImage){return/*#__PURE__*/_jsx(Message.ImageContent,{src:\"data:image/png;base64,\".concat(m.text),alt:\"Requested chart\",width:320});}else{return/*#__PURE__*/_jsx(Message,{model:{message:m.text,direction:m.direction,sentTime:\"\".concat(m.time),sender:m.sender}},idx);}})}),/*#__PURE__*/_jsx(MessageInput,{attachButton:false,onSend:handleSend,placeholder:\"Type prompt here\"})]})})]});}export default App;","map":{"version":3,"names":["axios","useState","styles","MainContainer","ChatContainer","MessageList","Message","MessageInput","TypingIndicator","jsx","_jsx","jsxs","_jsxs","QUERY_URL","Base64Image","_ref","base64Data","imageUrl","concat","src","alt","App","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","messages","setMessages","handleSend","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_","text","encodedText","url","response","wrap","_callee$","_context","prev","next","push","isImage","time","Date","sender","direction","encodeURIComponent","get","sent","data","is_image","t0","console","error","stop","_x","_x2","apply","arguments","className","children","typingIndicator","content","map","m","idx","log","ImageContent","width","model","message","sentTime","attachButton","onSend","placeholder"],"sources":["/Users/robertkotcher/griz-backend/webapp/src/App.js"],"sourcesContent":["import './App.css';\nimport axios from  'axios';\nimport { useState } from \"react\";\n\nimport styles from \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\nimport {\n  MainContainer,\n  ChatContainer,\n  MessageList,\n  Message,\n  MessageInput,\n  TypingIndicator\n} from \"@chatscope/chat-ui-kit-react\";\n\nconst QUERY_URL = \"/api/query\";\n\nconst Base64Image = ({ base64Data }) => {\n\tconst imageUrl = `data:image/png;base64,${base64Data}`;\n  \n\treturn <img src={imageUrl} alt=\"Chat plot\" />;\n  };\n\nfunction App() {\n\tconst [loading, setLoading] = useState(false);\n\tconst [messages, setMessages] = useState([]);\n\n\tconst handleSend = async (_, text) => {\n\t\tsetLoading(true);\n\n\t\tmessages.push({\n\t\t\ttext,\n\t\t\tisImage: false,\n\t\t\ttime: new Date(),\n\t\t\tsender: \"Robert\",\n\t\t\tdirection: \"outgoing\"\n\t\t});\n\n\t\ttry {\n\t\t\tconst encodedText = encodeURIComponent(text);\n\t\t\tconst url = `${QUERY_URL}?q=${encodedText}`;\n\n\t\t\t// Send the request using Axios or any other HTTP client library\n\t\t\tconst response = await axios.get(url);\n\n\t\t\tmessages.push({\n\t\t\t\ttext: response.data.data,\n\t\t\t\tisImage: response.data.is_image,\n\t\t\t\ttime: new Date(),\n\t\t\t\tsender: \"Griz\",\n\t\t\t\tdirection: \"incoming\"\n\t\t\t});\n\t\t\tsetMessages(messages);\n\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error sending the request:', error);\n\t\t}\n\t}\n\n  return (\n    <div className=\"App\">\n\t\t\t<h2>\n\t\t\t\tAsk a question about one of these tables:\n\t\t\t</h2>\n\t\t\t<ul>\n\t\t\t\t<li>bitcoin_blockchain blocks</li>\n\t\t\t\t<li>bitcoin_blockchain transactions</li>\n\t\t\t\t<li>austin_waste waste_and_diversion</li>\n\t\t\t\t<li>austin_bikeshare bikeshare_stations</li>\n\t\t\t\t<li>austin_bikeshare bikeshare_trips</li>\n\t\t\t\t<li>census_bureau_construction new_residential_construction</li>\n\t\t\t\t<li>census_opportunity_atlas tract_covariates</li>\n\t\t\t\t<li>chicago_crime crime</li>\n\t\t\t\t<li>covid19_aha hospital_beds</li>\n\t\t\t\t<li>covid19_aha staffing2</li>\n\t\t\t</ul>\n\t\t\t<MainContainer className=\"main-container\">\n\t\t\t\t<ChatContainer>\n\t\t\t\t\t<MessageList typingIndicator={loading ? <TypingIndicator content=\"Griz is typing\" /> : null}>\n\t\t\t\t\t\t{messages.map((m, idx) => {\n\t\t\t\t\t\t\tconsole.log(m);\n\t\t\t\t\t\t\tif (m.isImage) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Message.ImageContent\n\t\t\t\t\t\t\t\t\t\tsrc={`data:image/png;base64,${m.text}`}\n\t\t\t\t\t\t\t\t\t\talt=\"Requested chart\"\n\t\t\t\t\t\t\t\t\t\twidth={320}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\t\tmodel={{\n\t\t\t\t\t\t\t\t\t\tmessage: m.text,\n\t\t\t\t\t\t\t\t\t\tdirection: m.direction,\n\t\t\t\t\t\t\t\t\t\tsentTime: `${m.time}`,\n\t\t\t\t\t\t\t\t\t\tsender: m.sender,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</MessageList>\n\t\t\t\t\t<MessageInput attachButton={false} onSend={handleSend} placeholder=\"Type prompt here\" />\n\t\t\t\t</ChatContainer>\n\t\t\t</MainContainer>\n\t\t</div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}